<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html ng-app="scgen">
    <head>
        <title>Cisco Switch Config Generator</title>

        <!-- JQuery //-->
        <script src="lib/jquery/jquery-1.7.1.min.js"></script>

        <!-- Bootstrap //-->
        <link rel="stylesheet" type="text/css" href="lib/bootstrap/bootstrap.min.css" />
        <script type="text/javascript" src="lib/bootstrap/bootstrap.min.js"></script>

        <!-- Angular JS //-->
        <script src="lib/angular/angular-1.0.1.min.js"></script>

        <link rel="stylesheet" type="text/css" href="css/styles.css" />
        <script src="lib/sihnon/sihnon-framework.js"></script>
        <script src="js/scripts.js"></script>
        <script src="js/ui.js"></script>
        <script src="js/directives.js"></script>
        <script src="js/filters.js"></script>
        <script src="js/controllers.js"></script>
        <script src="js/app.js"></script>
    </head>
    <body>
        <div class="navbar navbar-fixed-top no-print">
            <div class="navbar-inner">
                <div class="container">
                    <a class="brand" href="#">Config Generator</a>

                    <ul class="nav">
                        <li class="active"><a href="#">Cisco Switch</a></li>
                        <li class=""><a href="#">Help</a></li>
                    </ul>
                </div><!-- /tobar-inner -->
            </div><!-- /container-fliud -->
        </div><!-- /topbar -->

        <div class="container" ng-controller="models_controller">
            <div class="row">
                <div class="span6">
                    <div class="row">
                        <h2>Device Type</h2>
                        <form id="model_selection" class="form-horizontal">
                            <fieldset id="model_selection_fields">
                                <div class="control-group">
                                    <label class="control-label">Filter</label>
                                    <div class="controls">
                                        <input type="text" value="" placeholder="Search:" ng-model="query.description" class="search-query">
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Device Model</label>
                                    <div class="controls">
                                        <select id="model_selection_device" ng-model="selected_model" ng-options="model as model.description for model in models | filter:query"></select>
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                    <form id="config_form" class="form-horizontal">
                        <div>
                            <script type="text/ng-template" id="context.tpl">
                                <h2>{{context.name}}</h2>
                                <div ng-repeat="section in context.sections | filter:nothidden | orderBy:'order'">
                                    <ng-switch on="section.ui">
                                        <div ng-switch-when="include">
                                            <ng-include src="'context.tpl'" ng-repeat="context in array(selected_model.contexts[section.target])"></ng-include>
                                        </div>
                                        <fieldset ng-switch-default>
                                            <legend>{{section.name}}</legend>
                                            <ng-switch on="group.ui" ng-repeat="group in section.groups | filter:nothidden | orderBy:'order'">
                                                <div ng-switch-when="checkboxgroup">
                                                    <div class="control-group">
                                                        <label class="control-label">{{group.name}}</label>
                                                        <div class="controls">
                                                            <label for="" class="checkbox" ng-repeat="field in group.fields | filter:nothidden">
                                                                <input type="checkbox" id="" name="{{field.command||group.command}}" ng-model="field.enabled" value="{{field.value}}" />
                                                                {{field.label}}
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-when="text">
                                                    <div class="control-group">
                                                        <label class="control-label">{{group.name}}</label>
                                                        <div class="controls">
                                                            <input type="text" name="{{group.command}}" ng-model="group.value" ng-pattern="validate(group.validation.pattern||'none')"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-when="number">
                                                    <div class="control-group">
                                                        <label class="control-label">{{group.name}}</label>
                                                        <div class="controls">
                                                            <input type="number" name="{{group.command}}" ng-model="group.value" min="{{group.validation.min}}" max="{{group.validation.max}}" ng-pattern="validate(group.validation.pattern||'none')" required/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-when="checkbox">
                                                    <div class="control-group">
                                                        <label class="control-label">{{group.name}}</label>
                                                        <div class="controls">
                                                            <input type="checkbox" name="{{group.command}}" ng-model="group.enabled" value="{{group.value}}" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-when="select">
                                                    <div class="control-group">
                                                        <label class="control-label">{{group.name}}</label>
                                                        <div class="controls">
                                                            <select name="{{group.command}}" ng-model="group.selected" ng-options="value as label for (value, label) in group.values"></select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-when="textarea">
                                                    <div class="control-group">
                                                        <label class="control-label">{{group.name}}</label>
                                                        <div class="controls">
                                                            <textarea name="{{group.command}}" rows="6" cols="45" wrap="off" class="span4">{{flatten(group.value)}}</textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-when="ipsubnet">
                                                    <div class="control-group">
                                                        <label class="control-label">{{group.name}}</label>
                                                        <div class="controls">
                                                            <input type="text" placeholder="IP Address" ng-model="group.values.address" />
                                                            <input type="text" placeholder="Subnet Mask" ng-model="group.values.mask" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-when="hosts">
                                                    <div class="control-group">
                                                        <label class="control-label">{{group.name}}</label>
                                                        <div class="controls">
                                                            <table class="table-bordered table-condensed">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Hostname</th>
                                                                        <th>Address</th>
                                                                        <th>Remove</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="(host,address) in group.values | orderBy:host">
                                                                        <td>{{host}}</td>
                                                                        <td>{{address}}</td>
                                                                        <td>
                                                                            <button class="btn btn-danger" data-host="{{host}}" ng-click="hosts.remove($event, group, host)">
                                                                                <i class="icon-remove icon-white"></i>
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <div class="parent">
                                                                <input type="text" placeholder="New Hostname" ng-model="hosts.new_host" />
                                                                <input type="text" placeholder="New IP Address" ng-model="hosts.new_address" ng-pattern="validation.ip" />
                                                                <div>
                                                                    <button class="btn btn-success" ng-click="hosts.add($event, group);">
                                                                        <i class="icon-edit icon-white"></i> Add/Edit Host
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-when="routes">
                                                    <div class="control-group">
                                                        <label class="control-label">{{group.name}}</label>
                                                        <div class="controls">
                                                            <table class="table-bordered table-condensed">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Address</th>
                                                                        <th>Mask</th>
                                                                        <th>Gateway</th>
                                                                        <th>Remove</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="route in group.values | orderBy:'subnet'">
                                                                        <td>{{route.subnet}}</td>
                                                                        <td>{{route.mask}}</td>
                                                                        <td>{{route.gateway}}</td>
                                                                        <td>
                                                                            <button class="btn btn-danger" data-host="{{host}}" ng-click="routes.remove($event, group, $index)">
                                                                                <i class="icon-remove icon-white"></i>
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <div class="parent">
                                                                <input type="text" placeholder="New Subnet" ng-model="routes.new_subnet" ng-pattern="validation.ip" />
                                                                <input type="text" placeholder="New Mask" ng-model="routes.new_mask" ng-pattern="validation.ip" />
                                                                <input type="text" placeholder="New Gateway" ng-model="routes.new_gateway" ng-pattern="validation.ip" />
                                                                <div>
                                                                    <button class="btn btn-success" ng-click="routes.add($event, group);">
                                                                        <i class="icon-edit icon-white"></i> Add Route
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-when="stpdisable">
                                                    <div class="control-group">
                                                        <label class="control-label">{{group.name}}</label>
                                                        <div class="controls">
                                                            <table class="table-bordered table-condensed">
                                                                <thead>
                                                                    <tr>
                                                                        <th>VLAN</th>
                                                                        <th>Remove</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="vlan in group.values.sort()">
                                                                        <td>{{vlan}}</td>
                                                                        <td>
                                                                            <button class="btn btn-danger" ng-click="stpdisable.remove($event, group, $index)">
                                                                                <i class="icon-remove icon-white"></i>
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <div class="parent">
                                                                <input type="text" placeholder="New VLAN" ng-model="stpdisable.new_vlan" />
                                                                <div>
                                                                    <button class="btn btn-success" ng-click="stpdisable.add($event, group);">
                                                                        <i class="icon-edit icon-white"></i> Add VLAN
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-when="servers">
                                                    <div class="control-group">
                                                        <label class="control-label">{{group.name}}</label>
                                                        <div class="controls">
                                                            <table class="table-bordered table-condensed">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Server</th>
                                                                        <th>Remove</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="server in group.values.sort()">
                                                                        <td>{{server}}</td>
                                                                        <td>
                                                                            <button class="btn btn-danger" ng-click="servers.remove($event, group, $index)">
                                                                                <i class="icon-remove icon-white"></i>
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <div class="parent">
                                                                <input type="text" placeholder="New Server" ng-model="servers.new_server" />
                                                                <div>
                                                                    <button class="btn btn-success" ng-click="servers.add($event, group);">
                                                                        <i class="icon-edit icon-white"></i> Add VLAN
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-when="aliases">
                                                    <div class="control-group">
                                                        <label class="control-label">{{group.name}}</label>
                                                        <div class="controls">
                                                            <table class="table-bordered table-condensed">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Context</th>
                                                                        <th>Name</th>
                                                                        <th>Command</th>
                                                                        <th>Remove</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="alias in group.values.sort() | orderBy:['context','name']">
                                                                        <td>{{alias.context}}</td>
                                                                        <td>{{alias.name}}</td>
                                                                        <td>{{alias.command}}</td>
                                                                        <td>
                                                                            <button class="btn btn-danger" ng-click="aliases.remove($event, group, $index)">
                                                                                <i class="icon-remove icon-white"></i>
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <div class="parent">
                                                                <input type="text" placeholder="New Context" ng-model="aliases.new_context" />
                                                                <input type="text" placeholder="New Name" ng-model="aliases.new_name" />
                                                                <input type="text" placeholder="New Command" ng-model="aliases.new_command" />
                                                                <div>
                                                                    <button class="btn btn-success" ng-click="aliases.add($event, group);">
                                                                        <i class="icon-edit icon-white"></i> Add Alias
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-when="addvlan">
                                                    <div class="control-group">
                                                        <label>New VLAN</label>
                                                        <div class="controls">
                                                            <input type="number" min="2" max="4096" ng-model="vlans.new_vlan" />
                                                            <input type="text" placeholder="New Description" ng-model="vlans.new_description" />
                                                            <div>
																<button class="btn btn-success" ng-click="vlans.add($event, context);">
																	<i class="icon-edit icon-white"></i> Add VLAN
																</button>
															</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-when="addinterface">
                                                    <div class="control-group">
                                                        <label>New Interface</label>
                                                        <div class="controls">
                                                            <input type="text" placeholder="New Interface"  ng-model="interfaces.new_interface" />
                                                            <select ng-model="interfaces.new_standard" ng-options="standard as standard.name for standard in port_standards"></select>
                                                            <div>
																<button class="btn btn-success" ng-click="interfaces.add($event, context);">
																	<i class="icon-edit icon-white"></i> Add Interface
																</button>
															</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-switch-default>
                                                    Unsupported UI {{group.ui}}
                                                </div>
                                            </ng-switch>
                                            <div class="control-group" ngm-if="section.removeable">
                                                <div class="controls">
                                                    <button class="btn btn-danger" ng-click="sections.remove($event, context, 'switch_context_params[0]', section.switch_context_params[0]);">
                                                        <i class="icon-remove icon-white"></i> Remove
                                                </div>
                                            </div>
                                        </fieldset>
                                    </ng-switch>
                                </div>
                            </script>
                            <ng-include src="'context.tpl'" ng-repeat="context in array(selected_model.contexts.global)"></ng-include>
                        </div>
                    </form>
                </div><!-- span6 -->
                <div class="span6" id="script_container"><!--{{{-->
                    <form id="script_form">
                        <fieldset id="generated_config_fields">
                            <legend for="generated_config_fields">Generated Configuration</legend>
                            <div class="control-group">
                                <script type="text/ng-template" id="context-output.tpl">
                                    <code>
                                        <div ng-repeat="section in context.sections | orderBy:'order'">
                                            <ng-switch on="section.ui">
                                                <div ng-switch-when="include">
                                                    <ng-include src="'context-output.tpl'" ng-repeat="context in array(selected_model.contexts[section.target])"></ng-include>
                                                </div>
                                                <div ng-switch-default>
                                                    <div class="code">{{contexts.switch(section, context)}}</div>
                                                    <div ng-repeat="group in section.groups | orderBy:'order'">
                                                        <ng-switch on="group.fields">
                                                            <div ng-switch-default>
                                                                <div ng-repeat="field in group.fields">
                                                                    <ng-switch on="group.ui">
                                                                        <div ng-switch-when="checkboxgroup" class="code">{{field.command||group.command|ioscommand:section.ios_context||context.ios_context:field.value:!field.enabled:group.indent||section.indent||0}}</div>
                                                                        <div ng-switch-default class="code">{{group.command|ioscommand:section.ios_context||context.ios_context:field.value:false:group.indent||section.indent||0}}</div>
                                                                    </ng-switch> 
                                                                </div>
                                                            </div>
                                                            <div ng-switch-when="undefined">
                                                                <ng-switch on="group.ui">
                                                                    <div ng-switch-when="text" class="code">{{group.command|ioscommand:section.ios_context||context.ios_context:group.value:false:group.indent||section.indent||0}}</div>
                                                                    <div ng-switch-when="number" class="code">{{group.command|ioscommand:section.ios_context||context.ios_context:group.value:false:group.indent||section.indent||0}}</div>
                                                                    <div ng-switch-when="checkbox" class="code">{{group.command|ioscommand:section.ios_context||context.ios_context:group.value:!group.enabled:group.indent||section.indent||0}}</div>
                                                                    <div ng-switch-when="select" class="code">{{group.command|ioscommand:section.ios_context||context.ios_context:group.selected:false:group.indent||section.indent||0}}</div>
                                                                    <div ng-switch-when="textarea" class="code">{{group.command|ioscommand:section.ios_context||context.ios_context:{name: group.banner_type, contents: flatten(group.value)}:false:group.indent||section.indent||0}}</div>
                                                                    <div ng-switch-when="ipsubnet" class="code">{{group.command|ioscommand:section.ios_context||context.ios_context:{address: group.values.address, mask: group.values.mask}:false:group.indent||section.indent||0}}</div>
                                                                    <div ng-switch-when="hosts">
                                                                        <div ng-repeat="(host, address) in group.values | orderBy:'host'" class="code">{{group.command|ioscommand:section.ios_context||context.ios_context:hosts.command(host, address):group.indent||section.indent||0}}</div>
                                                                    </div>
                                                                    <div ng-switch-when="routes">
                                                                        <div ng-repeat="route in group.values | orderBy:'subnet'" class="code">{{group.command|ioscommand:section.ios_context||context.ios_context:routes.command(route.subnet, route.mask, route.gateway):group.indent||section.indent||0}}</div>
                                                                    </div>
                                                                    <div ng-switch-when="stpdisable">
                                                                        <div ng-repeat="vlan in group.values.sort()" class="code">{{group.command|ioscommand:section.ios_context||context.ios_context:stpdisable.command(vlan):group.indent||section.indent||0}}</div>
                                                                    </div>
                                                                    <div ng-switch-when="servers">
                                                                        <div ng-repeat="server in group.values.sort()" class="code">{{group.command|ioscommand:section.ios_context||context.ios_context:servers.command(server):group.indent||section.indent||0}}</div>
                                                                    </div>
                                                                    <div ng-switch-when="aliases">
                                                                        <div ng-repeat="alias in group.values.sort() | orderBy:['context','name']" class="code">{{group.command|ioscommand:section.ios_context||context.ios_context:aliases.command(alias.context, alias.name, alias.command):group.indent||section.indent||0}}</div>
                                                                    </div>
																	<div ng-switch-when="addvlan"></div>
                                                                    <div ng-switch-when="addinterface"></div>
                                                                    <div ng-switch-default>
                                                                        ! unsupported type {{group.ui}}
                                                                    </div>
                                                                </ng-switch>
                                                            </div>
                                                        </ng-switch>
                                                    </div>
                                                    <div class="code">{{contexts.exit(section, context)}}</div>
                                                </div>
                                            </ng-switch>
                                        </div>
                                    </code>
                                </script>
                                <ng-include src="'context-output.tpl'" ng-repeat="context in array(selected_model.contexts.global)"></ng-include>
                            </div>
                        </fieldset>
                    </form>
                </div><!-- /span6 --><!--}}}-->
            </div><!-- row -->
            <div class="row">
                <div class="span12">
                    <footer>
                        <p>
                            Powered by 
                            <a href="https://github.com/optiz0r/scgen/" title="SCGen">SCGen</a>
                            <a href="https://github.com/optiz0r/scgen/tree/1.0" title="SCGen 1.0">1.0</a>
                            and <a href="https://github.com/optiz0r/sihnon-js-lib/" title="Sihnon JS Library">Sihnon JS Lib</a>
                            written by <a xmlns:cc="http://creativecommons.org/ns#" href="http://benroberts.net" property="cc:attributionName" rel="cc:attributionURL">Ben Roberts</a>.
                            <br />
                            This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.
                            <br />
                            <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">
                                <img alt="Creative Commons Licence" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" />
                            </a>
                        </p>                
                    </footer>
                </div>
            </div>
    </body>
</html>

